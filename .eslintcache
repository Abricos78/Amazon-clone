[{"C:\\Users\\святой лука\\Desktop\\mini-projects\\amazon-clone\\amazon-clone\\src\\index.js":"1","C:\\Users\\святой лука\\Desktop\\mini-projects\\amazon-clone\\amazon-clone\\src\\App.js":"2","C:\\Users\\святой лука\\Desktop\\mini-projects\\amazon-clone\\amazon-clone\\src\\reportWebVitals.js":"3","C:\\Users\\святой лука\\Desktop\\mini-projects\\amazon-clone\\amazon-clone\\src\\components\\Header\\Header.js":"4","C:\\Users\\святой лука\\Desktop\\mini-projects\\amazon-clone\\amazon-clone\\src\\components\\Home\\Home.js":"5","C:\\Users\\святой лука\\Desktop\\mini-projects\\amazon-clone\\amazon-clone\\src\\components\\Home\\Product\\Product.js":"6","C:\\Users\\святой лука\\Desktop\\mini-projects\\amazon-clone\\amazon-clone\\src\\components\\Checkout\\Checkout.js":"7","C:\\Users\\святой лука\\Desktop\\mini-projects\\amazon-clone\\amazon-clone\\src\\components\\Checkout\\Subtotal\\Subtotal.js":"8","C:\\Users\\святой лука\\Desktop\\mini-projects\\amazon-clone\\amazon-clone\\src\\redux\\StateProvider.js":"9","C:\\Users\\святой лука\\Desktop\\mini-projects\\amazon-clone\\amazon-clone\\src\\redux\\redux-store.js":"10","C:\\Users\\святой лука\\Desktop\\mini-projects\\amazon-clone\\amazon-clone\\src\\redux\\homeReducer.js":"11","C:\\Users\\святой лука\\Desktop\\mini-projects\\amazon-clone\\amazon-clone\\src\\components\\Checkout\\CheckoutProduct\\CheckoutProduct.js":"12","C:\\Users\\святой лука\\Desktop\\mini-projects\\amazon-clone\\amazon-clone\\src\\components\\Login\\Login.js":"13","C:\\Users\\святой лука\\Desktop\\mini-projects\\amazon-clone\\amazon-clone\\src\\redux\\loginReducer.js":"14","C:\\Users\\святой лука\\Desktop\\mini-projects\\amazon-clone\\amazon-clone\\src\\firebase.js":"15","C:\\Users\\святой лука\\Desktop\\mini-projects\\amazon-clone\\amazon-clone\\src\\redux\\appReducer.js":"16","C:\\Users\\святой лука\\Desktop\\mini-projects\\amazon-clone\\amazon-clone\\src\\components\\Payment\\Payment.js":"17","C:\\Users\\святой лука\\Desktop\\mini-projects\\amazon-clone\\amazon-clone\\src\\redux\\paymentReducer.js":"18","C:\\Users\\святой лука\\Desktop\\mini-projects\\amazon-clone\\amazon-clone\\src\\axios.js":"19"},{"size":1050,"mtime":1608214772318,"results":"20","hashOfConfig":"21"},{"size":1554,"mtime":1608336913990,"results":"22","hashOfConfig":"21"},{"size":362,"mtime":499162500000,"results":"23","hashOfConfig":"21"},{"size":2420,"mtime":1608322756382,"results":"24","hashOfConfig":"21"},{"size":3287,"mtime":1608122924575,"results":"25","hashOfConfig":"21"},{"size":1543,"mtime":1608122829741,"results":"26","hashOfConfig":"21"},{"size":1492,"mtime":1608393710931,"results":"27","hashOfConfig":"21"},{"size":1617,"mtime":1608322141593,"results":"28","hashOfConfig":"21"},{"size":373,"mtime":1607898105398,"results":"29","hashOfConfig":"21"},{"size":547,"mtime":1608393126281,"results":"30","hashOfConfig":"21"},{"size":2989,"mtime":1608049149902,"results":"31","hashOfConfig":"21"},{"size":1367,"mtime":1608122811382,"results":"32","hashOfConfig":"21"},{"size":2602,"mtime":1608322738158,"results":"33","hashOfConfig":"21"},{"size":1089,"mtime":1608303753764,"results":"34","hashOfConfig":"21"},{"size":490,"mtime":1608127629908,"results":"35","hashOfConfig":"21"},{"size":438,"mtime":1608214343866,"results":"36","hashOfConfig":"21"},{"size":5794,"mtime":1608408098298,"results":"37","hashOfConfig":"21"},{"size":1756,"mtime":1608395847308,"results":"38","hashOfConfig":"21"},{"size":157,"mtime":1608468989400,"results":"39","hashOfConfig":"21"},{"filePath":"40","messages":"41","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},"dhcgkv",{"filePath":"43","messages":"44","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},{"filePath":"45","messages":"46","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},{"filePath":"47","messages":"48","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},{"filePath":"49","messages":"50","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},{"filePath":"51","messages":"52","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},{"filePath":"53","messages":"54","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},{"filePath":"55","messages":"56","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},{"filePath":"57","messages":"58","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"59","messages":"60","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},{"filePath":"61","messages":"62","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},{"filePath":"63","messages":"64","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},{"filePath":"65","messages":"66","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},{"filePath":"67","messages":"68","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},{"filePath":"69","messages":"70","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},{"filePath":"71","messages":"72","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},{"filePath":"73","messages":"74","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"75","usedDeprecatedRules":"42"},{"filePath":"76","messages":"77","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},{"filePath":"78","messages":"79","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"C:\\Users\\святой лука\\Desktop\\mini-projects\\amazon-clone\\amazon-clone\\src\\index.js",[],["80","81"],"C:\\Users\\святой лука\\Desktop\\mini-projects\\amazon-clone\\amazon-clone\\src\\App.js",[],"C:\\Users\\святой лука\\Desktop\\mini-projects\\amazon-clone\\amazon-clone\\src\\reportWebVitals.js",[],"C:\\Users\\святой лука\\Desktop\\mini-projects\\amazon-clone\\amazon-clone\\src\\components\\Header\\Header.js",[],"C:\\Users\\святой лука\\Desktop\\mini-projects\\amazon-clone\\amazon-clone\\src\\components\\Home\\Home.js",[],"C:\\Users\\святой лука\\Desktop\\mini-projects\\amazon-clone\\amazon-clone\\src\\components\\Home\\Product\\Product.js",[],"C:\\Users\\святой лука\\Desktop\\mini-projects\\amazon-clone\\amazon-clone\\src\\components\\Checkout\\Checkout.js",[],"C:\\Users\\святой лука\\Desktop\\mini-projects\\amazon-clone\\amazon-clone\\src\\components\\Checkout\\Subtotal\\Subtotal.js",[],"C:\\Users\\святой лука\\Desktop\\mini-projects\\amazon-clone\\amazon-clone\\src\\redux\\StateProvider.js",[],"C:\\Users\\святой лука\\Desktop\\mini-projects\\amazon-clone\\amazon-clone\\src\\redux\\redux-store.js",[],"C:\\Users\\святой лука\\Desktop\\mini-projects\\amazon-clone\\amazon-clone\\src\\redux\\homeReducer.js",[],"C:\\Users\\святой лука\\Desktop\\mini-projects\\amazon-clone\\amazon-clone\\src\\components\\Checkout\\CheckoutProduct\\CheckoutProduct.js",[],"C:\\Users\\святой лука\\Desktop\\mini-projects\\amazon-clone\\amazon-clone\\src\\components\\Login\\Login.js",[],"C:\\Users\\святой лука\\Desktop\\mini-projects\\amazon-clone\\amazon-clone\\src\\redux\\loginReducer.js",[],"C:\\Users\\святой лука\\Desktop\\mini-projects\\amazon-clone\\amazon-clone\\src\\firebase.js",[],"C:\\Users\\святой лука\\Desktop\\mini-projects\\amazon-clone\\amazon-clone\\src\\redux\\appReducer.js",[],"C:\\Users\\святой лука\\Desktop\\mini-projects\\amazon-clone\\amazon-clone\\src\\components\\Payment\\Payment.js",["82"],"import { Link } from '@material-ui/core'\r\nimport { CardElement, useElements, useStripe } from '@stripe/react-stripe-js'\r\nimport axios from '../../axios'\r\nimport React from 'react'\r\nimport CurrencyFormat from 'react-currency-format'\r\nimport { connect } from 'react-redux'\r\nimport { useHistory } from 'react-router-dom'\r\nimport { setError, setDisabled, setSucceeded, setProcessing, setClientSecret } from '../../redux/paymentReducer'\r\nimport CheckoutProductContainer from '../Checkout/CheckoutProduct/CheckoutProduct'\r\nimport style from './Payment.module.css'\r\n\r\nfunction Payment({basket, user, error, disabled, succeeded, processing, clientSecret, setError, setDisabled, setSucceeded, setProcessing, setClientSecret}) {\r\n\r\n    let items = basket.map(item => {\r\n        return (\r\n            <CheckoutProductContainer \r\n                id={item.id}\r\n                title={item.title}\r\n                image={item.image}\r\n                price={item.price}\r\n                rating={item.rating}\r\n            />\r\n        )\r\n    })\r\n\r\n    let getBasketTotal = basket\r\n    .map(product => +product.price)\r\n    .reduce((accamulator, currentValue) => accamulator + currentValue, 0)\r\n                                                                           \r\n    const stripe = useStripe()\r\n    const elements = useElements()\r\n    const history = useHistory()\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault()\r\n        setProcessing(true)\r\n\r\n        const payload = await stripe.confirmCardPayment(clientSecret, {\r\n            payment_method: {\r\n                card: elements.getElement(CardElement)\r\n            }\r\n        }).then(({ paymentIntent }) => {\r\n            setSucceeded(true);\r\n            setError(null)\r\n            setProcessing(false)\r\n\r\n            history.replace('/orders')\r\n        })\r\n    }\r\n\r\n    const handleChange = e => {\r\n        debugger\r\n        setDisabled(e.empty)\r\n        setError(e.error ? e.error.message : '')\r\n    }\r\n\r\n    const getClientSecret = async () => {\r\n        const response = await axios({\r\n            method: 'post',\r\n            url: `/payments/create?total=${getBasketTotal * 100}`\r\n        })\r\n\r\n        setClientSecret(response.data.clientSecret)\r\n    }\r\n\r\n    getClientSecret()\r\n\r\n    return (\r\n        <div className={style.payment}>\r\n            <div className={style.container}>\r\n\r\n                <h1>\r\n                    Checkout (<Link to='/checkout'>{`${basket.length} items`}</Link>)\r\n                </h1>\r\n\r\n                <div className={style.section}>\r\n                    <div className={style.title}>\r\n                        <h3>Delivery Address</h3>\r\n                    </div>\r\n                    <div className={style.address}>\r\n                        <p>{user ? user.email : ''}</p>\r\n                        <p>123 React Lane</p>\r\n                        <p>Los Angeles, CA</p>\r\n                    </div>\r\n                </div>\r\n            \r\n\r\n                <div className={style.section}>\r\n                    <div className={style.title}>\r\n                        <h3>Review items and delivery</h3>\r\n                    </div>\r\n                    <div className={style.items}>\r\n                        {items}\r\n                    </div>\r\n                </div>\r\n\r\n                <div className={style.section}>\r\n                    <div className={style.title}>\r\n                        <h3>Payment Method</h3>\r\n                    </div>\r\n                    <div className={style.details}>\r\n                        <form onSubmit={handleSubmit}>\r\n                            <CardElement onChange={handleChange}/>\r\n\r\n                            <div className={style.priceContainer}>\r\n                                <CurrencyFormat \r\n                                    renderText={value => (\r\n                                        <h3>Order Total: {value}</h3>\r\n                                    )}\r\n                                    decimaScale={2}\r\n                                    value={getBasketTotal}\r\n                                    displayType={\"text\"}\r\n                                    thousandSeparator={true}\r\n                                    prefix={\"$\"}\r\n                                />\r\n                                <button disabled={processing || disabled || succeeded}>\r\n                                    <span>{processing ? <p>Processing</p> : \"Buy Now\"}</span>\r\n                                </button>\r\n                            </div>\r\n\r\n                            {error && <div>{error}</div>}\r\n                        </form>\r\n                    </div>\r\n\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nlet mapStateToProps = state => {\r\n    return {\r\n        basket: state.homePage.basket,\r\n        user: state.app.user,\r\n        error: state.paymentPage.error,\r\n        disabled: state.paymentPage.disabled,\r\n        succeeded: state.paymentPage.succeeded,\r\n        processing: state.paymentPage.processing,\r\n        clientSecret: state.paymentPage.clientSecret\r\n    }\r\n},\r\n    mapDispatchToProps = dispatch => {\r\n        return {\r\n            setError: error => {\r\n                dispatch(setError(error))\r\n            },\r\n            setDisabled: disabled => {\r\n                dispatch(setDisabled(disabled))\r\n            },\r\n            setSucceeded: succeeded => {\r\n                dispatch(setSucceeded(succeeded))\r\n            },\r\n            setProcessing: processing => {\r\n                dispatch(setProcessing(processing))\r\n            },\r\n            setClientSecret: clientSecret => {\r\n                dispatch(setClientSecret(clientSecret))\r\n            }\r\n        }\r\n    }\r\n\r\nlet PaymentContainer = connect(mapStateToProps, mapDispatchToProps)(Payment)\r\n\r\nexport default PaymentContainer\r\n","C:\\Users\\святой лука\\Desktop\\mini-projects\\amazon-clone\\amazon-clone\\src\\redux\\paymentReducer.js",[],"C:\\Users\\святой лука\\Desktop\\mini-projects\\amazon-clone\\amazon-clone\\src\\axios.js",[],{"ruleId":"83","replacedBy":"84"},{"ruleId":"85","replacedBy":"86"},{"ruleId":"87","severity":1,"message":"88","line":38,"column":15,"nodeType":"89","messageId":"90","endLine":38,"endColumn":22},"no-native-reassign",["91"],"no-negated-in-lhs",["92"],"no-unused-vars","'payload' is assigned a value but never used.","Identifier","unusedVar","no-global-assign","no-unsafe-negation"]